check process prometheus with pidfile /var/run/prometheus/prometheus.pid
    start program = "/bin/systemctl start prometheus"
    stop program = "/bin/systemctl stop prometheus"
    if failed port 9090 protocol http then restart
    if failed url http://localhost:9090/-/healthy then restart
    if cpu > 90% for 5 cycles then alert
    if memory > 2 GB for 5 cycles then restart
    if 5 restarts within 5 cycles then alert

check process polkadot with pidfile /var/run/polkadot/polkadot.pid
    start program = "/bin/systemctl start polkadot"
    stop program = "/bin/systemctl stop polkadot"
    if failed port 9933 protocol http for 3 cycles then restart
    if failed port 9944 protocol http for 3 cycles then restart
    if failed port 30333 protocol tcp for 3 cycles then restart
    if failed url http://localhost:9933/health then restart
    if cpu > 90% for 5 cycles then alert
    if memory > 80% for 5 cycles then alert
    if 5 restarts within 5 cycles then timeout
    group polkadot